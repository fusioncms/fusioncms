(window.webpackJsonp=window.webpackJsonp||[]).push([[90],{VqwB:function(e,t,a){"use strict";a.r(t);var n={head:{title:function(){return{inner:"Add-on Modules"}}},data:function(){return{endpoint:"/datatable/modules"}},methods:{upload:function(e){var t=this;if(void 0!==e){var a=new FormData;a.append("_method","POST"),a.append("file-upload",e),axios.post("/api/modules/upload",a).then((function(e){t.$proton.$emit("toggle-modal-upload-module"),t.$refs.upload.remove(),t.refresh("Module successfully uploaded.")})).catch((function(e){return t.refresh(e.response.data.message,"danger")}))}},enable:function(e){var t=this;axios.post("/api/modules/".concat(e,"/enable")).then((function(e){t.refresh("Module successfully enabled."),e.data.data.redirect.enable&&t.$router.push(e.data.data.redirect.enable)})).catch((function(e){return t.refresh(e.response.data.message,"danger")}))},disable:function(e){var t=this;axios.post("/api/modules/".concat(e,"/disable")).then((function(e){return t.refresh("Module successfully disabled.")})).catch((function(e){return t.refresh(e.response.data.message,"danger")}))},install:function(e){var t=this;axios.post("/api/modules/".concat(e,"/install")).then((function(e){t.refresh("Module successfully installed."),e.data.data.redirect.install&&t.$router.push(e.data.data.redirect.install)})).catch((function(e){return t.refresh(e.response.data.message,"danger")}))},uninstall:function(e){var t=this;axios.post("/api/modules/".concat(e,"/uninstall")).then((function(e){return t.refresh("Module successfully removed.")})).catch((function(e){return t.refresh(e.response.data.message,"danger")}))},update:function(e){var t=this;axios.patch("/api/modules/".concat(e,"/update")).then((function(e){return t.refresh("Module successfully updated.")})).catch((function(e){return t.refresh(e.response.data.message,"danger")}))},seed:function(e){var t=this;axios.patch("/api/modules/".concat(e,"/seed")).then((function(e){return t.refresh("Module successfully seeded.")})).catch((function(e){return t.refresh(e.response.data.message,"danger")}))},refresh:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";e&&toast(e,t),this.$store.dispatch("navigation/fetchAdminNavigation"),proton().$emit("refresh-datatable-modules")}}},o=a("KHd+"),l=Object(o.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("portal",{attrs:{to:"title"}},[a("app-title",{attrs:{icon:"project-diagram"}},[e._v("Add-on Modules")])],1),e._v(" "),a("portal",{attrs:{to:"actions"}},[a("p-button",{directives:[{name:"modal",rawName:"v-modal:upload-module",arg:"upload-module"}],staticClass:"button"},[e._v("Upload Module")])],1),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"content-container"},[a("p-table",{key:"modules_table",attrs:{endpoint:e.endpoint,id:"modules","sort-by":"name","no-search":"","primary-key":"handle"},scopedSlots:e._u([{key:"name",fn:function(t){return[a("div",{staticClass:"flex items-center"},[t.record.registered&&t.record.installed?a("p-status",{staticClass:"mr-2",attrs:{value:t.record.enabled}}):a("span",{staticClass:"mr-2",class:[t.record.registered?"text-gray-500":"text-warning-500"]},[a("fa-icon",{staticClass:"icon fa-xs",attrs:{icon:"circle"}})],1),e._v("\n\n                        "+e._s(t.record.name)+"\n                    ")],1)]}},{key:"slug",fn:function(t){return[e._v("\n                    "+e._s(t.record.slug)+"\n                ")]}},{key:"version",fn:function(t){return[a("span",{staticClass:"badge"},[e._v(e._s(t.record.version))])]}},{key:"description",fn:function(t){return[a("span",{staticClass:"text-gray-800 text-sm"},[e._v(e._s(t.record.description))])]}},{key:"actions",fn:function(t){return[t.record.registered?a("p-actions",{key:"module_"+t.record.id+"_actions",attrs:{id:"module_"+t.record.id+"_actions"}},[t.record.installed?[t.record.enabled?a("p-dropdown-link",{on:{click:function(a){return e.disable(t.record.slug)}}},[e._v("Disable")]):a("p-dropdown-link",{on:{click:function(a){return e.enable(t.record.slug)}}},[e._v("Enable")]),e._v(" "),t.record.enabled?a("p-dropdown-link",{attrs:{to:{name:"setting.section",params:{section:t.record.slug}}}},[e._v("Settings")]):e._e(),e._v(" "),t.record.enabled?a("p-dropdown-link",{on:{click:function(a){return e.seed(t.record.slug)}}},[e._v("Seed")]):e._e(),e._v(" "),t.record.enabled?a("p-dropdown-link",{directives:[{name:"modal",rawName:"v-modal:update-module",value:t.record,expression:"table.record",arg:"update-module"}],on:{click:function(e){e.preventDefault()}}},[e._v("\n                                Update\n                            ")]):e._e(),e._v(" "),a("p-dropdown-link",{directives:[{name:"modal",rawName:"v-modal:uninstall-module",value:t.record,expression:"table.record",arg:"uninstall-module"}],attrs:{classes:"link--danger"},on:{click:function(e){e.preventDefault()}}},[e._v("\n                                Uninstall\n                            ")])]:[a("p-dropdown-link",{directives:[{name:"modal",rawName:"v-modal:install-module",value:t.record,expression:"table.record",arg:"install-module"}],attrs:{classes:"link--success"},on:{click:function(e){e.preventDefault()}}},[e._v("\n                                Install\n                            ")]),e._v(" "),a("p-dropdown-link",{directives:[{name:"modal",rawName:"v-modal:uninstall-module",value:t.record,expression:"table.record",arg:"uninstall-module"}],attrs:{classes:"link--danger"},on:{click:function(e){e.preventDefault()}}},[e._v("\n                                Remove\n                            ")])]],2):e._e()]}}])})],1)]),e._v(" "),a("portal",{attrs:{to:"modals"}},[a("p-modal",{key:"uninstall_module",attrs:{name:"uninstall-module",title:"Uninstall Module"},scopedSlots:e._u([{key:"footer",fn:function(t){return[a("p-button",{directives:[{name:"modal",rawName:"v-modal:uninstall-module",arg:"uninstall-module"}],staticClass:"ml-3",attrs:{theme:"danger"},on:{click:function(a){return e.uninstall(t.data.slug)}}},[e._v("Uninstall")]),e._v(" "),a("p-button",{directives:[{name:"modal",rawName:"v-modal:uninstall-module",arg:"uninstall-module"}]},[e._v("Cancel")])]}}])},[a("p",[e._v("All assets and data will be removed.")]),e._v(" "),a("p",[e._v("Are you sure you want to uninstall this module?")])]),e._v(" "),a("p-modal",{key:"install_module",attrs:{name:"install-module",title:"Install Module"},scopedSlots:e._u([{key:"footer",fn:function(t){return[a("p-button",{directives:[{name:"modal",rawName:"v-modal:install-module",arg:"install-module"}],staticClass:"ml-3",attrs:{theme:"success"},on:{click:function(a){return e.install(t.data.slug)}}},[e._v("Install")]),e._v(" "),a("p-button",{directives:[{name:"modal",rawName:"v-modal:install-module",arg:"install-module"}]},[e._v("Cancel")])]}}])},[a("p",[e._v("Are you sure you want to install this module?")])]),e._v(" "),a("p-modal",{key:"update_module",attrs:{name:"update-module",title:"Update Module"},scopedSlots:e._u([{key:"footer",fn:function(t){return[a("p-button",{directives:[{name:"modal",rawName:"v-modal:update-module",arg:"update-module"}],staticClass:"ml-3",attrs:{theme:"warning"},on:{click:function(a){return e.update(t.data.slug)}}},[e._v("Update")]),e._v(" "),a("p-button",{directives:[{name:"modal",rawName:"v-modal:update-module",arg:"update-module"}]},[e._v("Cancel")])]}}])},[a("p",[e._v("This will migrate any new migrations and run db:seed.")]),e._v(" "),a("p",[e._v("Are you sure you want to proceed?")])]),e._v(" "),a("p-modal",{key:"upload_module",attrs:{name:"upload-module",title:"Upload Module"}},[a("p-upload",{ref:"upload",attrs:{name:"file-upload",accept:"zip",multiple:!1},on:{input:e.upload}})],1)],1)],1)}),[],!1,null,null,null);t.default=l.exports}}]);