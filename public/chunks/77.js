(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{Ayh0:function(a,t,e){"use strict";e.r(t);var i=e("uYI7"),r=e("ke3Z"),n=e("dhqo"),s=e.n(n),d=e("5fFP"),o={head:{title:function(){return{inner:this.form.name||"Loading..."}}},data:function(){return{id:null,parent_id:"",fieldsets:[],matrices:[],form:new r.a({parent_id:0,name:"",handle:"",description:"",type:"collection",fieldset:null,reference_singular:"",reference_plural:"",sidebar:"1",quicklink:"1",icon:"",route:"",template:"",categorizable:"1",creditable:"1",publishable:"1",revision_control:"1",seoable:"1",status:"1"},!0)}},components:{"shared-form":i.a},methods:{submit:function(){var a=this;""==this.form.reference_singular&&(this.form.reference_singular=s.a.singular(this.form.name)),""==this.form.reference_plural&&(this.form.reference_plural=s()(this.form.name)),this.form.patch("/api/matrices/"+this.id).then((function(t){d.a.dispatch("navigation/fetchAdminNavigation"),toast("Matrix successfully updated","success"),a.$router.push("/matrices")})).catch((function(a){toast(a.response.data.message,"failed")}))}},beforeRouteEnter:function(a,t,e){axios.all([axios.get("/api/matrices/"+a.params.matrix),axios.get("/api/fieldsets"),axios.get("/api/matrices")]).then(axios.spread((function(a,t,i){e((function(e){e.fieldsets=_.map(t.data.data,(function(a){return{label:a.name,value:a.id}})),e.fieldsets.unshift({label:"None",value:null}),e.matrices=_.map(i.data.data,(function(a){return{label:a.name,value:a.id}})),e.matrices.unshift({label:"None",value:0}),_.remove(e.matrices,(function(t){return t.label==a.data.data.name})),e.id=a.data.data.id,e.form.parent_id=a.data.data.parent_id,e.form.name=a.data.data.name,e.form.handle=a.data.data.handle,e.form.description=a.data.data.description,e.form.type=a.data.data.type,e.form.fieldset=a.data.data.fieldset&&a.data.data.fieldset.id?a.data.data.fieldset.id:null,e.form.reference_singular=a.data.data.reference_singular,e.form.reference_plural=a.data.data.reference_plural,e.form.sidebar=a.data.data.sidebar?"1":"0",e.form.quicklink=a.data.data.quicklink?"1":"0",e.form.icon=a.data.data.icon,e.form.route=a.data.data.route,e.form.template=a.data.data.template,e.form.revision_control=a.data.data.revision_control?"1":"0",e.form.categorizable=a.data.data.categorizable?"1":"0",e.form.creditable=a.data.data.creditable?"1":"0",e.form.publishable=a.data.data.publishable?"1":"0",e.form.seoable=a.data.data.seoable?"1":"0",e.form.status=a.data.data.status?"1":"0",e.$emit("updateHead"),e.form.resetChangeListener()}))}))).catch((function(a){e("/matrices"),toast("The requested matrix could not be found","warning")}))}},l=e("KHd+"),f=Object(l.a)(o,(function(){var a=this.$createElement,t=this._self._c||a;return t("div",[t("portal",{attrs:{to:"title"}},[t("app-title",{attrs:{icon:"chart-network"}},[this._v("Edit Matrix")])],1),this._v(" "),t("shared-form",{attrs:{id:this.id,form:this.form,submit:this.submit,fieldsets:this.fieldsets,matrices:this.matrices}})],1)}),[],!1,null,null,null);t.default=f.exports}}]);