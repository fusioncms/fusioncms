(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{Zwc7:function(t,a,s){"use strict";s.r(a);var e={data:function(){return{backups:[],ready:!1}},methods:{runCleanup:function(){var t=this;axios.get("/api/backups/cleanup").then((function(a){toast("Backup successfully created","success"),t.backups=a.data.data})).catch((function(t){toast(t.response.data.message,"failed")}))},runBackup:function(){var t=this;axios.get("/api/backups/run").then((function(a){toast("Backup successfully cleaned","success"),t.backups=a.data.data})).catch((function(t){toast(t.response.data.message,"failed")}))}},beforeRouteEnter:function(t,a,s){axios.all([axios.get("/api/backups")]).then(axios.spread((function(t){s((function(a){a.backups=t.data.data,a.ready=!0}))})))}},n=s("KHd+"),c=Object(n.a)(e,(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("portal",{attrs:{to:"title"}},[s("app-title",{attrs:{icon:"save"}},[t._v("Backups")])],1),t._v(" "),s("portal",{attrs:{to:"actions"}},[s("p-button",{on:{click:t.runCleanup}},[t._v("Run cleanup")]),t._v(" "),s("p-button",{staticClass:"button--primary",on:{click:t.runBackup}},[t._v("Run backup")]),t._v(" "),s("p-button",{directives:[{name:"modal",rawName:"v-modal:settings",arg:"settings"}],staticClass:"button--info"},[t._v("Settings")])],1),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"content-container"},[t.ready?s("table",[t._m(0),t._v(" "),s("tbody",t._l(t.backups,(function(a){return s("tr",[s("td",[t._v(t._s(a.name))]),t._v(" "),s("td",[s("code",[t._v(t._s(a.disk))])]),t._v(" "),s("td",[a.isReachable?s("span",{staticClass:"badge badge--success"},[t._v("Reachable")]):t._e(),t._v(" "),a.isReachable?t._e():s("span",{staticClass:"badge badge--fail"},[t._v("Reachable")]),t._v(" "),a.isHealthy?s("span",{staticClass:"badge badge--success"},[t._v("Healthy")]):t._e(),t._v(" "),a.isHealthy?t._e():s("span",{staticClass:"badge badge--fail"},[t._v("Healthy")])]),t._v(" "),s("td",[t._v(t._s(a.amount))]),t._v(" "),s("td",[t._v(t._s(a.newest))]),t._v(" "),s("td",[t._v(t._s(a.usedStorage))])])})),0)]):t._e()])]),t._v(" "),s("portal",{attrs:{to:"modals"}},[s("settings-modal",{attrs:{section:"backups"}})],1)],1)}),[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("thead",[s("th",[t._v("Name")]),t._v(" "),s("th",[t._v("Disk")]),t._v(" "),s("th",[t._v("Status")]),t._v(" "),s("th",[t._v("# Backups")]),t._v(" "),s("th",[t._v("Newest")]),t._v(" "),s("th",[t._v("Storage Used")])])}],!1,null,null,null);a.default=c.exports}}]);