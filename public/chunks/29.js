(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{oxcM:function(t,a,e){"use strict";e.r(a);var s={name:"address-fieldtype",data:function(){var t={},a=this.value;return t=this.value?{address1:a.address1||"",address2:a.address2||"",city:a.city||"",state:a.state||"",zip:a.zip||"",country:a.country||"",lat:a.lat||"",lng:a.lng||"",formatted_address:this.addressLookup||""}:{address1:"",address2:"",city:"",state:"",zip:"",country:"",lat:"",lng:"",formatted_address:""},{marker:null,data:t,mapError:""}},props:{field:{type:Object,required:!0},value:{required:!1,default:null}},computed:{mapID:function(){return this.field.handle+"_map"},addressLookup:function(){var t=this.data.address1+" "+this.data.address2;return this.data.city&&(t=t+", "+this.data.city),(this.data.state||this.data.zip)&&(t=t+", "+this.data.state+" "+this.data.zip),this.data.country&&(t=t+", "+this.data.country),t.replace(/ +/g," ")}},watch:{addressLookup:function(){this.locateAddress()}},methods:{updateValue:function(t,a){this.data[a]=t,this.$emit("input",this.data)},createMap:function(){_.isUndefined(window.google)||(this.map=new google.maps.Map(document.getElementById(this.mapID)),this.locateAddress())},locateAddress:_.debounce(function(){if(!_.isUndefined(window.google)){google.maps.event.trigger(this.map,"resize");var t=new google.maps.Geocoder,a=this,e=this.addressLookup;if(""==e||" "==e)return null!==this.marker&&this.marker.setMap(null),this.map.setCenter(new google.maps.LatLng(0,0)),this.map.setZoom(1),this.data.formatted_address="",this.data.lat="",void(this.data.lng="");t.geocode({address:e},function(t,s){s===google.maps.GeocoderStatus.OK&&(a.map.setCenter(t[0].geometry.location),a.map.setZoom(16),a.data.formatted_address=t[0].formatted_address,a.data.lat=t[0].geometry.location.lat(),a.data.lng=t[0].geometry.location.lng(),""===e&&" "===e||(null!==a.marker&&a.marker.setMap(null),a.marker=new google.maps.Marker({map:a.map,position:t[0].geometry.location})))})}},500)},mounted:function(){var t=this,a=t.field.settings.api_key;if(a&&""!=a)if(_.isUndefined(window.google)){window.mapInit=function(){t.createMap()};var e=document.createElement("script");e.setAttribute("src","https://maps.googleapis.com/maps/api/js?key=".concat(a,"&callback=mapInit")),document.head.appendChild(e)}else t.createMap();else t.mapError='You will need to generate a <a href="https://developers.google.com/maps/documentation/javascript/get-api-key" target="_blank">Google Maps API key</a> in order to view the map component and retrieve latitude and longitude coordinates for your address'}},d=e("KHd+"),i=Object(d.a)(s,function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"px-2 mb-4"},[e("div",{staticClass:"form__label"},[t._v(t._s(t.field.name))]),t._v(" "),e("div",{staticClass:"row px-2"},[e("div",{staticClass:"w-1/2"},[e("p-input",{staticClass:"mb-2",attrs:{name:t.field.handle+"_address1",placeholder:"Address 1",value:t.data.address1},on:{input:function(a){return t.updateValue(a,"address1")}}}),t._v(" "),e("p-input",{staticClass:"mb-2",attrs:{name:t.field.handle+"_address2",placeholder:"Address 2",value:t.data.address2},on:{input:function(a){return t.updateValue(a,"address2")}}}),t._v(" "),e("p-input",{staticClass:"mb-2",attrs:{name:t.field.handle+"_city",placeholder:"City",value:t.data.city},on:{input:function(a){return t.updateValue(a,"city")}}}),t._v(" "),e("p-input",{staticClass:"mb-2",attrs:{name:t.field.handle+"_state",placeholder:"State",value:t.data.state},on:{input:function(a){return t.updateValue(a,"state")}}}),t._v(" "),e("p-input",{staticClass:"mb-2",attrs:{name:t.field.handle+"_zip",placeholder:"ZIP",value:t.data.zip},on:{input:function(a){return t.updateValue(a,"zip")}}}),t._v(" "),e("p-input",{staticClass:"mb-2",attrs:{name:t.field.handle+"_country",placeholder:"Country",value:t.data.country},on:{input:function(a){return t.updateValue(a,"country")}}})],1),t._v(" "),e("div",{staticClass:"w-1/2 pl-2"},[e("div",{staticClass:"h-full",attrs:{id:t.mapID}},[t.mapError?e("div",{staticClass:"p-5",domProps:{innerHTML:t._s(t.mapError)}}):t._e()])])])])},[],!1,null,null,null);a.default=i.exports}}]);