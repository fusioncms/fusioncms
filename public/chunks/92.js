(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{cS6j:function(s,e,t){"use strict";t.r(e);var a={head:{title:function(){return{inner:this.name||"Loading..."}}},data:function(){return{user:null,id:Number(this.$route.params.user)||null,roles:null,errors:{},name:"",email:"",role:null,password:"",passwordConfirmation:"",status:"1"}},computed:{roleOptions:function(){var s=_.filter(this.roles,(function(s){return"guest"!==s.handle}));return s=_.map(s,(function(s){return{label:s.name,value:s.slug}}))}},methods:{hasError:function(s){return void 0!==this.errors[s]},getError:function(s){return this.hasError(s)?this.errors[s][0]:""},submit:function(){var s=this;axios.patch("/api/users/"+this.id,{name:this.name,email:this.email,password:this.password,password_confirmation:this.passwordConfirmation,role:this.role,status:this.status}).then((function(e){toast("User successfully updated","success"),s.$router.push("/users")})).catch((function(e){toast(e.response.data.message,"failed"),s.errors=e.response.data.errors}))}},beforeRouteEnter:function(s,e,t){axios.all([axios.get("/api/roles"),axios.get("/api/users/"+s.params.user)]).then(axios.spread((function(s,e){t((function(t){t.roles=s.data.data,t.user=e.data.data,t.name=t.user.name,t.email=t.user.email,t.role=t.user.roles[0].slug,t.status=t.user.status?"1":"0",t.$emit("updateHead")}))})))}},r=t("KHd+"),i=Object(r.a)(a,(function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",[t("portal",{attrs:{to:"title"}},[t("app-title",{attrs:{icon:"user-alt"}},[s._v("Edit User")])],1),s._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"content-container"},[t("form",{on:{submit:function(e){return e.preventDefault(),s.submit(e)}}},[t("p-card",[t("div",{staticClass:"row"},[t("div",{staticClass:"col form-sidebar"},[t("div",{staticClass:"xl:mr-10"},[t("h3",[s._v("Personal")]),s._v(" "),t("p",{staticClass:"text-sm"},[s._v("Information to identify the user both within the CMS and by means of login.")])])]),s._v(" "),t("div",{staticClass:"col form-content"},[t("p-input",{attrs:{name:"name",label:"Name",autocomplete:"off","has-error":s.hasError("name"),"error-message":s.getError("name"),autofocus:"",required:""},model:{value:s.name,callback:function(e){s.name=e},expression:"name"}}),s._v(" "),t("p-input",{attrs:{type:"email",name:"email",label:"E-mail",autocomplete:"off","has-error":s.hasError("email"),"error-message":s.getError("email"),required:""},model:{value:s.email,callback:function(e){s.email=e},expression:"email"}})],1)]),s._v(" "),t("hr"),s._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col form-sidebar"},[t("div",{staticClass:"xl:mr-10"},[t("h3",[s._v("Security")]),s._v(" "),t("p",{staticClass:"text-sm"},[s._v("Secure the account by specifying the role and setting a strong password.")])])]),s._v(" "),t("div",{staticClass:"col form-content"},[t("p-select",{attrs:{name:"role",label:"Role",options:s.roleOptions,autocomplete:"off",value:"user","has-error":s.hasError("role"),"error-message":s.getError("role"),required:""},model:{value:s.role,callback:function(e){s.role=e},expression:"role"}}),s._v(" "),t("p-input",{attrs:{type:"password",name:"password",label:"Password",autocomplete:"new-password","has-error":s.hasError("password"),"error-message":s.getError("password"),required:""},model:{value:s.password,callback:function(e){s.password=e},expression:"password"}}),s._v(" "),t("p-input",{attrs:{type:"password",name:"password_confirmation",label:"Confirm Password",autocomplete:"new-password","has-error":s.hasError("password_confirmation"),"error-message":s.getError("password_confirmation"),required:""},model:{value:s.passwordConfirmation,callback:function(e){s.passwordConfirmation=e},expression:"passwordConfirmation"}})],1)])])],1)]),s._v(" "),t("div",{staticClass:"side-container"},[t("form",{on:{submit:function(e){return e.preventDefault(),s.submit(e)}}},[t("p-card",{staticClass:"mb-6"},[t("p-select",{attrs:{name:"status",label:"Status",options:[{label:"Enabled",value:"1"},{label:"Disabled",value:"0"}]},model:{value:s.status,callback:function(e){s.status=e},expression:"status"}}),s._v(" "),t("portal",{attrs:{to:"actions"}},[t("router-link",{staticClass:"button mr-3",attrs:{to:{name:"users"}}},[s._v("Cancel")]),s._v(" "),t("button",{staticClass:"button button--primary",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),s.submit(e)}}},[s._v("Save User")])],1)],1)],1),s._v(" "),s.user?t("p-card",{staticClass:"text-sm"},[t("div",{staticClass:"flex justify-between"},[t("label",{staticClass:"form__label"},[s._v("Status")]),s._v(" "),s.user.status?t("p",[s._v("Enabled "),t("fa-icon",{staticClass:"text-success-400",attrs:{icon:"circle",size:"xs","fixed-width":""}})],1):t("p",[s._v("Disabled "),t("fa-icon",{staticClass:"text-danger-400",attrs:{icon:"circle",size:"xs","fixed-width":""}})],1)]),s._v(" "),t("div",{staticClass:"flex justify-between"},[t("label",{staticClass:"form__label"},[s._v("Verified")]),s._v(" "),s.user.verified?t("p",[s._v("Yes "),t("fa-icon",{staticClass:"text-success-400",attrs:{icon:"circle",size:"xs","fixed-width":""}})],1):t("p",[s._v("No "),t("fa-icon",{staticClass:"text-danger-400",attrs:{icon:"circle",size:"xs","fixed-width":""}})],1)]),s._v(" "),t("div",{staticClass:"flex justify-between"},[t("label",{staticClass:"form__label"},[s._v("Registered")]),s._v(" "),t("p",[s._v(s._s(s.$moment(s.user.created_at.date).format("L")))])]),s._v(" "),t("div",{staticClass:"flex justify-between"},[t("label",{staticClass:"form__label"},[s._v("Last Login")]),s._v(" "),s.user.logged_in_at?t("p",[s._v(s._s(s.$moment(s.user.logged_in_at.date).format("L")))]):t("p",[s._v("Never")])]),s._v(" "),t("div",{staticClass:"flex justify-between"},[t("label",{staticClass:"form__label"},[s._v("Last Invalid Login")]),s._v(" "),s.user.invalidly_logged_in_at?t("p",[s._v(s._s(s.$moment(s.user.invalidly_logged_in_at.date).format("L")))]):t("p",[s._v("Never")])]),s._v(" "),t("div",{staticClass:"flex justify-between"},[t("label",{staticClass:"form__label"},[s._v("Last Password Change")]),s._v(" "),s.user.password_changed_at?t("p",[s._v(s._s(s.$moment(s.user.password_changed_at.date).format("L")))]):t("p",[s._v("Never")])]),s._v(" "),t("div",{staticClass:"flex justify-between"},[t("label",{staticClass:"form__label"},[s._v("Invalid Login Count")]),s._v(" "),t("p",[s._v(s._s(s.user.invalid_logins))])])]):s._e()],1)])],1)}),[],!1,null,null,null);e.default=i.exports}}]);