(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{"8kUA":function(e,t,i){"use strict";i.r(t);var s=i("L2JU"),a=i("8SKh"),l={computed:{selection:{get:function(){return this.selected},set:function(e){this.$emit("input",e)}}},props:{selected:{type:Array,required:!0},limitReached:{type:Boolean,default:!1},hasHeader:{type:Boolean,default:!0},canDelete:{type:Boolean,default:!0}}},n=i("KHd+"),r=Object(n.a)(l,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"card h-full"},[e.hasHeader?i("div",{staticClass:"flex items-center justify-between border-b border-gray-200 p-3"},[i("p-button",{on:{click:function(t){return e.$emit("clear")}}},[i("fa-icon",{staticClass:"mr-2",attrs:{icon:["fas","eject"]}}),e._v(" Clear")],1),e._v(" "),i("p-button",{on:{click:function(t){return e.$emit("close")}}},[e._v("Close "),i("fa-icon",{staticClass:"ml-2",attrs:{icon:["fas","times"]}})],1)],1):e._e(),e._v(" "),e.selected.length>0?i("div",[i("p-sortable-list",{staticClass:"sortable-list",model:{value:e.selection,callback:function(t){e.selection=t},expression:"selection"}},[i("div",{staticClass:"w-full p-3"},e._l(e.selected,(function(t){return i("p-sortable-item",{key:t.id},[i("div",{staticClass:"flex items-center py-2"},[i("div",{staticClass:"w-1/12"},[i("p-sortable-handle",{staticClass:"cursor-move"},[i("fa-icon",{staticClass:"handle fa-fw text-gray-400",attrs:{icon:"ellipsis-v"}})],1)],1),e._v(" "),i("div",{staticClass:"w-3/12"},["image"==t.type?i("p-img",{attrs:{src:t.url+"?w=50&h=50&fit=crop","background-color":"white",width:50,height:50}}):i("p-img",{attrs:{src:"/img/"+t.type+"-large.svg","background-color":"white",width:50,height:50}})],1),e._v(" "),i("div",{staticClass:"w-6/12"},[i("div",[e._v(e._s(t.name))])]),e._v(" "),i("div",{staticClass:"w-2/12 text-right"},[i("p-button",{directives:[{name:"show",rawName:"v-show",value:e.canDelete,expression:"canDelete"}],attrs:{theme:"danger"},on:{click:function(i){return e.$emit("remove",t.id)}}},[i("fa-icon",{attrs:{icon:["fas","trash"]}})],1)],1)])])})),1)]),e._v(" "),e.limitReached?i("div",{staticClass:"text-sm italic text-danger-600 text-center"},[e._v("\n\t\t\tFile limit reached\n\t\t")]):e._e()],1):i("div",{staticClass:"h-full flex flex-col justify-center items-center text-5xl text-gray-300"},[i("fa-icon",{staticClass:"fa-fw fa-3x",attrs:{icon:["far","copy"]}}),e._v(" "),i("span",{staticClass:"text-lg py-2 text-gray-500"},[e._v("Select some files...")])],1)])}),[],!1,null,null,null).exports,c=i("n/Zj"),o=i("O3a7"),d=i("vvXJ"),u=i("IDoC"),f=i("4XVt"),p=i("hqkP"),m=i("C++B");function v(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function h(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var b={name:"asset-fieldtype",components:{"file-uploader":a.a,"file-selection":r,"display-action":o.a,"breadcrumb-action":c.a,"search-action":d.a,"sort-action":u.a,"view-action":f.a,directory:p.a,file:m.a},mixins:[i("OuK8").default,i("BAqS").default,i("GfKu").default],data:function(){return{modalOpen:!1,selected:[]}},props:{field:{type:Object,required:!0},value:{type:Array,required:!1,default:function(){return[]}}},watch:{selected:function(e){this.$emit("input",e)},modalOpen:function(e){this.reset(),e?(this.fetchFilesAndDirectories(),this.loadSelector(this.$el.querySelector(".selectables"))):this.destroySelector()},loading:function(e){e?this.destroySelector():this.loadSelector(this.$el.querySelector(".selectables"))}},computed:{limitReached:function(){return this.field.settings.limit&&this.field.settings.limit<=this.selected.length},typeRestriction:function(){return this.field.settings.filetype_restrictions}},methods:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?v(Object(i),!0).forEach((function(t){h(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):v(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},Object(s.b)({setDropzoneVisible:"filemanager/setDropzoneVisible"}),{isValidSelection:function(e){return 0==this.typeRestriction.length||_.includes(this.typeRestriction,e.type)},add:function(){var e=this;_.forEach(this.selectedFiles,(function(t){return e.addById(t)}))},addById:function(e){if(!this.limitReached){var t=_.find(this.selected,["id",e]),i=_.find(this.files,["id",e]);!t&&this.isValidSelection(i)&&this.selected.push(i)}},remove:function(e){this.selected=_.filter(this.selected,(function(t){return t.id!==e}))}}),mounted:function(){this.selected=this.value||[]}},y=Object(n.a)(b,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("label",{staticClass:"form__label",attrs:{for:e.field.handle}},[e._v(e._s(e.field.name))]),e._v(" "),i("div",{staticClass:"flex items-start justify-between"},[i("div",{staticClass:"w-1/2"},[i("p-button",{attrs:{theme:"secondary"},on:{click:function(t){e.modalOpen=!0}}},[i("fa-icon",{staticClass:"mr-1",attrs:{icon:["fas","plus-circle"]}}),e._v(" Manage Assets\n\t\t\t\t")],1)],1),e._v(" "),i("file-selection",{staticClass:"w-1/2",attrs:{selected:e.selected,limitReached:e.limitReached,hasHeader:!1},on:{clear:function(t){e.selected=[]},close:function(t){e.modalOpen=!1},remove:e.remove},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1),e._v(" "),i("p-modal",{attrs:{name:"file-manager","no-header":"","no-footer":"","extra-large":""},model:{value:e.modalOpen,callback:function(t){e.modalOpen=t},expression:"modalOpen"}},[i("file-uploader",{ref:"uploader"}),e._v(" "),i("div",{staticClass:"row",on:{dragenter:function(t){return e.setDropzoneVisible(!0)}}},[i("div",{staticClass:"side-container"},[i("file-selection",{attrs:{selected:e.selected,limitReached:e.limitReached},on:{clear:function(t){e.selected=[]},close:function(t){e.modalOpen=!1},remove:e.remove}})],1),e._v(" "),i("div",{staticClass:"content-container"},[i("div",{staticClass:"card"},[i("div",{staticClass:"flex items-center justify-between px-3 pt-2"},[i("ul",[i("li",{staticClass:"mr-4"},[i("p-button",{attrs:{theme:"success",disabled:e.limitReached},on:{click:e.add}},[i("fa-icon",{staticClass:"mr-1",attrs:{icon:["fas","arrow-alt-circle-left"]}})],1)],1)]),e._v(" "),i("ul",[i("li",{staticClass:"inline-flex mr-2"},[i("p-button",{staticClass:"rounded-r-none",attrs:{theme:"primary"},on:{click:function(t){return e.$refs.uploader.openDZ()}}},[i("fa-icon",{attrs:{icon:["fas","upload"]}})],1),e._v(" "),i("p-button",{directives:[{name:"modal",rawName:"v-modal:new-folder",arg:"new-folder"}],staticClass:"rounded-l-none"},[i("fa-icon",{attrs:{icon:["fas","folder-plus"]}})],1)],1)]),e._v(" "),i("ul",{staticClass:"flex w-full"},[i("li",{staticClass:"mr-2 w-full"},[i("search-action")],1)]),e._v(" "),i("ul",{staticClass:"flex"},[i("li",{staticClass:"mr-2"},[i("display-action")],1),e._v(" "),i("li",{staticClass:"mr-2"},[i("sort-action")],1),e._v(" "),i("li",{staticClass:"mr-2"},[i("view-action")],1)])]),e._v(" "),i("div",{staticClass:"flex items-center border-b border-gray-200 px-3 py-2"},[i("breadcrumb-action")],1),e._v(" "),i("div",{staticClass:"gallery-container selectables"},[i("div",{staticClass:"gallery border-b border-gray-200 pb-2"},e._l(e.directories,(function(t){return i("directory",{key:t.id,attrs:{directory:t,isDropzone:!0},on:{dblclick:function(i){return e.navigate(t)}}})})),1),e._v(" "),i("div",{staticClass:"gallery"},e._l(e.files,(function(t){return i("file",{key:t.id,attrs:{file:t},on:{dblclick:function(i){return e.addById(t.id)}}})})),1)])])])])],1),e._v(" "),i("portal",{attrs:{to:"modals"}},[i("new-folder-modal")],1)],1)}),[],!1,null,null,null);t.default=y.exports}}]);