(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{"8kUA":function(t,e,i){"use strict";i.r(e);var s=i("L2JU"),a=i("8SKh"),r=i("n/Zj"),l=i("O3a7"),n=i("vvXJ"),c=i("IDoC"),o=i("4XVt"),d=i("hqkP"),f=i("C++B");function u(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function p(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var m={name:"asset-fieldtype",components:{"file-uploader":a.a,"display-action":l.a,"breadcrumb-action":r.a,"search-action":n.a,"sort-action":c.a,"view-action":o.a,directory:d.a,file:f.a},mixins:[i("OuK8").default,i("GfKu").default],data:function(){return{modalOpen:!1,selected:[]}},props:{field:{type:Object,required:!0},value:{type:Array,required:!1,default:function(){return[]}}},watch:{selected:function(t){this.$emit("input",t)}},computed:{limitReached:function(){return""!=this.field.settings.limit&&this.field.settings.limit<=this.selected.length}},methods:function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?u(Object(i),!0).forEach((function(e){p(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},Object(s.b)({setDropzoneVisible:"filemanager/setDropzoneVisible"}),{isValidSelection:function(t){var e=this.field.settings.filetype_restrictions;return _.includes(e,"everything")||_.includes(e,t.category)},add:function(){var t=this;_.forEach(this.selectedFiles,(function(e){return t.addById(e)}))},addById:function(t){if(!this.limitReached){var e=_.find(this.selected,["id",t]),i=_.find(this.files,["id",t]);!e&&this.isValidSelection(i)&&this.selected.push(i)}},remove:function(t){this.selected=_.filter(this.selected,(function(e){return e.id!==t}))},clear:function(){this.selected=[]},open:function(){this.modalOpen=!0,this.selected=this.value||[],this.reset(),this.fetchFilesAndDirectories()},close:function(){this.modalOpen=!1,this.reset()}})},v=i("KHd+"),b=Object(v.a)(m,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("label",{staticClass:"form__label",attrs:{for:t.field.handle}},[t._v(t._s(t.field.name))]),t._v(" "),i("p-button",{attrs:{theme:"secondary"},on:{click:t.open}},[i("fa-icon",{staticClass:"mr-1",attrs:{icon:["fas","plus-circle"]}}),t._v(" Manage Assets\n\t\t")],1),t._v(" "),i("div",{staticClass:"flex flex-wrap items-center justify-start"},t._l(t.value,(function(e,s){return i("p-button",{key:e.id,staticClass:"m-2",on:{click:function(i){return t.remove(e.id)}}},[t._v("\n\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t"),i("fa-icon",{staticClass:"ml-2",attrs:{icon:["fas","times"]}})],1)})),1),t._v(" "),i("p-modal",{attrs:{name:"file-manager","no-header":"","no-footer":"","extra-large":""},model:{value:t.modalOpen,callback:function(e){t.modalOpen=e},expression:"modalOpen"}},[i("file-uploader",{ref:"uploader"}),t._v(" "),i("div",{staticClass:"row",on:{dragenter:function(e){return t.setDropzoneVisible(!0)}}},[i("div",{staticClass:"side-container"},[i("div",{staticClass:"card h-full"},[i("div",{staticClass:"flex items-center justify-between border-b border-gray-200 px-3 py-2 text-right"},[i("p-button",{on:{click:t.clear}},[i("fa-icon",{staticClass:"mr-2",attrs:{icon:["fas","eject"]}}),t._v("\n\t\t\t\t\t\t\t\tClear\n\t\t\t\t\t\t\t")],1),t._v(" "),i("p-button",{on:{click:t.close}},[t._v("\n\t\t\t\t\t\t\t\tClose\n\t\t\t\t\t\t\t\t"),i("fa-icon",{staticClass:"ml-2",attrs:{icon:["fas","times"]}})],1)],1),t._v(" "),t.selected.length>0?i("div",{staticClass:"row"},[i("p-sortable-list",{staticClass:"sortable-list",model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[i("div",{staticClass:"col mb-6 w-full"},t._l(t.selected,(function(e,s){return i("p-sortable-item",{key:e.id,staticClass:"flex items-center justify-between"},[i("div",{staticClass:"py-2 px-3"},[i("p-sortable-handle",{staticClass:"cursor-move w-1/5"},[i("fa-icon",{staticClass:"handle fa-fw text-gray-400",attrs:{icon:"ellipsis-v"}})],1),t._v(" "),"image"==e.category?i("p-img",{attrs:{src:e.url+"?w=50&h=50&fit=crop","background-color":"white",width:50,height:50}}):i("p-img",{attrs:{src:"/img/"+e.category+"-large.svg","background-color":"white",width:50,height:50}}),t._v(" "),i("div",[t._v(t._s(e.name))]),t._v(" "),i("p-button",{attrs:{theme:"danger"},on:{click:function(i){return t.remove(e.id)}}},[i("fa-icon",{attrs:{icon:["fas","trash"]}})],1)],1)])})),1)]),t._v(" "),t.limitReached?i("div",{staticClass:"flex w-full items-center justify-center"},[i("span",{staticClass:"text-sm italic text-danger-600"},[t._v("File limit reached")])]):t._e()],1):i("div",{staticClass:"h-full flex flex-col justify-center items-center text-5xl text-gray-300"},[i("fa-icon",{staticClass:"fa-fw fa-3x",attrs:{icon:["far","copy"]}}),t._v(" "),i("span",{staticClass:"text-lg py-2 text-gray-500"},[t._v("Select some files...")])],1)])]),t._v(" "),i("div",{staticClass:"content-container"},[i("div",{staticClass:"card"},[i("div",{staticClass:"flex items-center justify-between px-3 pt-2"},[i("ul",[i("li",{staticClass:"mr-4"},[i("p-button",{attrs:{theme:"success",disabled:t.limitReached},on:{click:t.add}},[i("fa-icon",{staticClass:"mr-1",attrs:{icon:["fas","arrow-alt-circle-left"]}})],1)],1)]),t._v(" "),i("ul",[i("li",{staticClass:"inline-flex mr-2"},[i("p-button",{staticClass:"rounded-r-none",attrs:{theme:"primary"},on:{click:function(e){return t.$refs.uploader.openDZ()}}},[i("fa-icon",{attrs:{icon:["fas","upload"]}})],1),t._v(" "),i("p-button",{directives:[{name:"modal",rawName:"v-modal:new-folder",arg:"new-folder"}],staticClass:"rounded-l-none"},[i("fa-icon",{attrs:{icon:["fas","folder-plus"]}})],1)],1)]),t._v(" "),i("ul",{staticClass:"flex w-full"},[i("li",{staticClass:"mr-2 w-full"},[i("search-action")],1)]),t._v(" "),i("ul",{staticClass:"flex"},[i("li",{staticClass:"mr-2"},[i("display-action")],1),t._v(" "),i("li",{staticClass:"mr-2"},[i("sort-action")],1),t._v(" "),i("li",{staticClass:"mr-2"},[i("view-action")],1)])]),t._v(" "),i("div",{staticClass:"flex items-center border-b border-gray-200 px-3 py-2"},[i("breadcrumb-action")],1),t._v(" "),i("div",{staticClass:"gallery-container selectables"},[i("div",{staticClass:"gallery border-b border-gray-200 pb-2"},t._l(t.directories,(function(e){return i("directory",{key:e.id,attrs:{directory:e},on:{dblclick:function(i){return t.navigate(e)}}})})),1),t._v(" "),i("div",{staticClass:"gallery"},t._l(t.files,(function(e){return i("file",{key:e.id,attrs:{file:e},on:{dblclick:function(i){return t.addById(e.id)}}})})),1)])])])])],1),t._v(" "),i("portal",{attrs:{to:"modals"}},[i("new-folder-modal")],1)],1)}),[],!1,null,null,null);e.default=b.exports}}]);