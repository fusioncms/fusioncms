(window.webpackJsonp=window.webpackJsonp||[]).push([[41,64],{iQVT:function(a,e,t){"use strict";t.r(e);var l=t("LvDl"),r=t.n(l),s=t("ke3Z"),o={head:{title:function(){return{inner:this.form.name||"Loading..."}}},components:{"markdown-field":t("qt+H").default},data:function(){return{id:null,ready:!1,placeholders:{},form:new s.a({name:"",handle:"",markdown:"",status:"1"},!0)}},methods:{isArray:function(a){return r.a.isArray(a)},addPlaceholder:function(a,e){var t=this.$refs.markdown.codemirror.getDoc();t.getCursor();e?t.replaceSelection("{{ $".concat(e,"->").concat(a," }}"),t.getSelection()):t.replaceSelection("{{ $".concat(a," }}"),t.getSelection())},updateMarkdown:function(a){this.form.markdown=a},submit:function(){var a=this;this.form.patch("/api/mailables/"+this.id).then((function(e){toast("Mailable successfully updated","success"),a.$router.push("/mailables")})).catch((function(a){toast(a.response.data.message,"failed")}))},placeholderOptions:function(a){var e=[];return r.a.each(a,(function(a){e.push({label:a,value:a})})),e}},beforeRouteEnter:function(a,e,t){axios.all([axios.get("/api/mailables/".concat(a.params.mailable))]).then(axios.spread((function(a){t((function(e){e.id=a.data.data.id,e.placeholders=a.data.data.placeholders,e.ready=!0,e.form.name=a.data.data.name,e.form.handle=a.data.data.handle,e.form.markdown=a.data.data.markdown,e.form.resetChangeListener(),e.$emit("updateHead")}))}))).catch((function(a){t("/mailables"),toast("The requested mailable could not be found","warning")}))}},n=t("KHd+"),i=Object(n.a)(o,(function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",[t("portal",{attrs:{to:"title"}},[t("app-title",{attrs:{icon:"mail-bulk"}},[a._v("Edit Mailable")])],1),a._v(" "),t("portal",{attrs:{to:"actions"}},[t("router-link",{staticClass:"button mr-3",attrs:{to:{name:"mailables"}}},[a._v("Go Back")]),a._v(" "),t("button",{staticClass:"button button--primary",class:{"button--disabled":!a.form.hasChanges},attrs:{type:"submit",disabled:!a.form.hasChanges},on:{click:function(e){return e.preventDefault(),a.submit(e)}}},[a._v("Save Mailable")])],1),a._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"content-container"},[t("form",{on:{submit:function(e){return e.preventDefault(),a.submit(e)}}},[t("p-card",[t("div",{staticClass:"row"},[t("div",{staticClass:"col form-sidebar"},[t("div",{staticClass:"xxl:mr-10"})]),a._v(" "),t("div",{staticClass:"col form-content"},[t("div",{staticClass:"row mb-6"},[t("div",{staticClass:"col w-full xxl:w-1/2 mb-6"},[t("p-input",{attrs:{name:"name",label:"Name",help:"What this mailable will be called.",autocomplete:"off",autofocus:"",required:"","has-error":a.form.errors.has("name"),"error-message":a.form.errors.get("name")},model:{value:a.form.name,callback:function(e){a.$set(a.form,"name",e)},expression:"form.name"}})],1),a._v(" "),t("div",{staticClass:"col w-full xxl:w-1/2 mb-6"},[t("p-slug",{attrs:{name:"handle",label:"Handle",help:"A developer-friendly variant of the mailable's name.",autocomplete:"off",required:"",delimiter:"_",watch:a.form.name,"has-error":a.form.errors.has("handle"),"error-message":a.form.errors.get("handle")},model:{value:a.form.handle,callback:function(e){a.$set(a.form,"handle",e)},expression:"form.handle"}})],1)]),a._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col w-full"},[a.ready?t("markdown-field",{ref:"markdown",attrs:{field:{name:"Content",handle:"markdown"},value:a.form.markdown},on:{input:a.updateMarkdown}}):a._e()],1)])])])])],1)]),a._v(" "),t("div",{staticClass:"side-container"},[t("p-card",[t("div",{staticClass:"row"},[t("div",{staticClass:"col w-full"},[t("p-select",{attrs:{name:"status",label:"Status",options:[{label:"Enabled",value:"1"},{label:"Disabled",value:"0"}]},model:{value:a.form.status,callback:function(e){a.$set(a.form,"status",e)},expression:"form.status"}})],1)])]),a._v(" "),t("p-card",{staticClass:"mt-5"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col w-full mailable__placeholders"},[t("label",{staticClass:"form__label"},[a._v("Placeholders")]),a._v(" "),t("p",{staticClass:"text-sm"},[a._v("Below you will find a variety of values you may reference within your template.")]),a._v(" "),a._l(a.placeholders,(function(e,l){return t("div",{key:l},[a.isArray(e)?a._e():t("p-button",{staticClass:"w-full mb-3 text-xs font-mono",on:{click:function(t){return a.addPlaceholder(e)}}},[a._v("$"+a._s(e))]),a._v(" "),t("p-dropdown",[t("div",{staticClass:"font-mono text-sm"},[a._v("$"+a._s(l))]),a._v(" "),t("div",{staticClass:"form__select-arrow"},[t("svg",{staticClass:"fill-current h-4 w-4",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"}},[t("path",{attrs:{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"}})])]),a._v(" "),t("template",{slot:"options"},a._l(e,(function(e,r){return t("p-dropdown-item",{key:r,staticClass:"text-xs font-mono",on:{click:function(t){return a.addPlaceholder(e,l)}}},[a._v("\n                                            "+a._s(e)+"\n                                    ")])})),1)],2)],1)}))],2)])])],1)])],1)}),[],!1,null,null,null);e.default=i.exports},"qt+H":function(a,e,t){"use strict";t.r(e);var l=t("VrN/"),r=t.n(l),s=t("DlQD"),o=t.n(s);t("RKCW"),t("mki7"),t("19Vz");var n={name:"markdown-fieldtype",data:function(){return{codemirror:null}},props:{field:{type:Object,required:!0},value:{required:!1,default:""}},computed:{preview:function(){var a=o.a.lexer(this.value);return o.a.parser(a)}},mounted:function(){var a=this;this.codemirror=r.a.fromTextArea(document.getElementById(this.field.handle),{theme:"fusion",mode:{name:"gfm",highlightFormatting:!0,fencedCodeBlockHighlighting:!0},lineWrapping:!0,viewportMargin:1/0,keyMap:"sublime"}),setTimeout((function(){a.codemirror.refresh()}),1),this.codemirror.on("change",(function(e){a.$emit("input",e.getValue())}))}},i=t("KHd+"),d=Object(i.a)(n,(function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"form__group"},[t("label",{staticClass:"form__label",attrs:{for:a.field.handle},domProps:{innerHTML:a._s(a.field.name)}}),a._v(" "),t("p-tabs",[t("p-tab",{attrs:{name:"Markdown"}},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"value"}],attrs:{name:a.field.handle,id:a.field.handle,cols:"30",rows:"12",autofocus:""},domProps:{value:a.value},on:{input:function(e){e.target.composing||(a.value=e.target.value)}}})]),a._v(" "),t("p-tab",{attrs:{name:"Preview"}},[t("div",{staticClass:"markdown-body",domProps:{innerHTML:a._s(a.preview)}})])],1)],1)}),[],!1,null,null,null);e.default=d.exports}}]);