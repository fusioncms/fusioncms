(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{"84Ca":function(t,e,s){"use strict";s.r(e);var n={head:{title:function(){return{inner:"Theme Settings"}}},data:function(){return{theme:{},preview:"",url:""}},computed:{hash:function(){return this.encode(JSON.stringify(this.theme.setting))},previewUrl:function(){return this.baseUrl+this.url+"?preview="+this.hash},baseUrl:function(){return this.setting("system.site_url")+"/"}},watch:{"theme.setting":{handler:_.debounce((function(t){this.reload()}),500),deep:!0},url:{handler:_.debounce((function(t){this.reload()}),500)}},methods:{submit:function(){this.theme.setting._method="PATCH",axios.post("/api/themes/".concat(this.theme.slug),this.theme.setting).then((function(){toast("Theme settings have been updated","success")}))},encode:function(t){return encodeURIComponent(t).replace(/[!'()*]/g,escape)},reload:function(){this.preview=this.previewUrl},reset:function(){this.url="",this.reload()}},beforeRouteEnter:function(t,e,s){axios.all([axios.get("/api/theme")]).then(axios.spread((function(t){s((function(e){e.theme=t.data.data}))})))}},a=s("KHd+"),i=Object(a.a)(n,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("portal",{attrs:{to:"title"}},[s("app-title",{attrs:{icon:"paint-roller"}},[t._v("Theme")])],1),t._v(" "),s("portal",{attrs:{to:"actions"}},[s("div",{staticClass:"buttons"},[s("router-link",{staticClass:"button",attrs:{to:{name:"themes.index"}}},[t._v("Browse")]),t._v(" "),s("button",{staticClass:"button button--primary",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.submit(e)}}},[t._v("Save")])],1)]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"side-container"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card__body text-center"},[t._v("\n                    Your currently set theme is "),s("span",{staticClass:"font-bold"},[t._v(t._s(t.theme.name))]),t._v(".\n                ")])]),t._v(" "),s("div",{staticClass:"card"},[s("div",{staticClass:"card__body"},[s("h3",{staticClass:"font-bold text-lg"},[t._v("Theme Settings")]),t._v(" "),t._l(t.theme.settings,(function(e,n){return s(e.fieldtype+"-fieldtype",{key:n,tag:"component",staticClass:"mb-8",attrs:{field:{name:e.name,handle:n,help:e.help,settings:{}}},model:{value:t.theme.setting[n],callback:function(e){t.$set(t.theme.setting,n,e)},expression:"theme.setting[handle]"}})}))],2)])]),t._v(" "),s("div",{staticClass:"content-container"},[s("div",{staticClass:"card"},[s("div",{staticClass:"w-full p-2 bg-gray-700 rounded-t flex"},[s("button",{staticClass:"ml-2 mr-4 focus:outline-none focus:bg-gray-800",on:{click:function(e){return e.preventDefault(),t.reload(e)}}},[s("fa-icon",{staticClass:"fa-fw text-white",attrs:{icon:["fas","redo"]}})],1),t._v(" "),s("button",{staticClass:"mr-4 focus:outline-none focus:bg-gray-800",on:{click:function(e){return e.preventDefault(),t.reset(e)}}},[s("fa-icon",{staticClass:"fa-fw text-white",attrs:{icon:["fas","home"]}})],1),t._v(" "),s("div",{staticClass:"px-6 bg-gray-800 rounded-full text-gray-400 flex flex-1"},[s("span",[t._v(t._s(t.baseUrl))]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.url,expression:"url"}],staticClass:"flex flex-1 tracking-wide text-white font-bold bg-transparent focus:outline-none",attrs:{type:"text",name:"url"},domProps:{value:t.url},on:{enter:function(e){return e.preventDefault(),t.reload(e)},input:function(e){e.target.composing||(t.url=e.target.value)}}})])]),t._v(" "),t.preview?s("p-frame",{attrs:{src:t.preview,width:"100%",height:"1080px",border:"0"}}):t._e()],1)])]),t._v(" "),s("portal",{attrs:{to:"modals"}},[s("p-modal",{attrs:{name:"learn-more",large:"","no-header":""}},[s("div",{staticClass:"text-center"},[s("h2",{staticClass:"font-bold text-5xl mb-2 leading-none"},[t._v(t._s(t.theme.name))]),t._v(" "),s("h3",{staticClass:"text-sm font-semibold text-gray-800"},[t._v("v"+t._s(t.theme.version)+", "+t._s(t.theme.author))]),t._v(" "),s("p",[t._v(t._s(t.theme.description))])])])],1)],1)}),[],!1,null,null,null);e.default=i.exports}}]);